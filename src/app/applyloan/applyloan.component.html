<div class="container">
    <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="form-group">
            <br><label class="apply_loan">Loan Type:</label>
            <select class="apply_loan" formControlName="loanType"
                (change)="onOptionsSelected(form.get('loanType').value)">
                <option disabled>Select Type</option>
                <option value="personal">Personal</option>
                <option value="housing">Housing</option>
                <option value="educational">Educational</option>
            </select>
            <div *ngIf="form.get('loanType').invalid && 
                       (form.get('loanType').dirty || form.get('loanType').touched)">
            <mat-error *ngIf="form.get('loanType').hasError('required')">                
                <small class="error"> *Loan type is required.</small>
            </mat-error>
            </div>

            <br>
            <br><label class="apply_loan">Loan Amount:</label>
            <input class="apply_loan" type="text" formControlName="loanAmount" name="loanAmount">
            <div *ngIf="form.get('loanAmount').invalid && 
                       (form.get('loanAmount').dirty || form.get('loanAmount').touched)">
            <mat-error *ngIf="form.get('loanAmount').hasError('required')">
                <small class="error"> *Loan amount is required.</small>
            </mat-error>
            </div> 
  
            <br>             
            <br><label class="apply_loan">Loan Issue date:</label>
            <input class="apply_loan" name="issueDate" type="date" formControlName="issueDate" [min]="minDate" />
            <div *ngIf="form.get('issueDate').invalid && 
                       (form.get('issueDate').dirty || form.get('issueDate').touched)">
            <mat-error *ngIf="form.get('issueDate').hasError('required')">
                <small class="error"> *Loan issue date is required.</small>
            </mat-error>
            </div>

            <br>
            <br><label class="apply_loan">Rate of Interest:</label>
            <input class="apply_loan" type="text" formControlName="rateOfInterest" value={{roi}}>

            <br>
            <br><label class="apply_loan">Duration Of the Loan:</label>
            <select class="apply_loan" formControlName="loanDuration">
                <option disabled>Select Duration</option>
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="15">15</option>
                <option value="20">20</option>
            </select>
            <div *ngIf="form.get('loanDuration').invalid && 
                       (form.get('loanDuration').dirty || form.get('loanDuration').touched)">
            <mat-error *ngIf="form.get('loanDuration').hasError('required')">
                <small class="error"> *Loan duration is required.</small>
            </mat-error>
            </div>

            <div>
                <ng-container style="float: right;" *ngIf="form.get('loanType').value==='educational'"
                    class="form-control">
                    <div>
                        <br>
                        <br><label class="apply_loan">Course fee:</label>
                        <input class="apply_loan" type="text" formControlName="courseFee">
                        <span *ngIf="form.get('courseFee').invalid && 
                        (form.get('courseFee').dirty || form.get('courseFee').touched)">
                        <mat-error *ngIf="form.get('courseFee').hasError('required')">
                            <small class="error"> *Course fee is required.</small>
                        </mat-error>
                       </span>
                        <br>
                        <br><label class="apply_loan">Course:</label>
                        <select class="apply_loan" formControlName="courseName">
                            <option disabled>Course Name</option>
                            <option value="be">B.E</option>
                            <option value="btech">B.Tech</option>
                        </select>
                        <span *ngIf="form.get('courseName').invalid && 
                        (form.get('courseName').dirty || form.get('courseName').touched)">
                        <mat-error *ngIf="form.get('courseName').hasError('required')">
                            <small class="error"> *Course name is required.</small>
                        </mat-error>
                        </span>
                        <br>
                        <br><label class="apply_loan">Father name:</label>
                        <input class="apply_loan" type="text" formControlName="fatherName">
                        <span *ngIf="form.get('fatherName').invalid && 
                        (form.get('fatherName').dirty || form.get('fatherName').touched)">
                        <mat-error *ngIf="form.get('fatherName').hasError('required')">
                            <small class="error"> *Father name is required.</small>
                        </mat-error>
                        </span>
                        <br>
                    </div>
                </ng-container>
            </div>

            <div>
                <ng-container *ngIf="form.get('loanType').touched && 
                        (form.get('loanType').value==='personal'|| form.get('loanType').value==='housing')"
                    class="form-control">
                    <div>
                        <br>
                        <br><label class="apply_loan">Annual Income:</label>
                        <input type="text" class="apply_loan" formControlName="annualIncome" required>
                        <span *ngIf="form.get('annualIncome').invalid && 
                        (form.get('annualIncome').dirty || form.get('annualIncome').touched)">
                        <mat-error *ngIf="form.get('annualIncome').hasError('required')">
                            <small class="error"> *Annual is required.</small>
                        </mat-error>
                        </span>
                        <br>
                        <br><label class="apply_loan">Company Name:</label>
                        <input type="text" class="apply_loan" formControlName="companyName" required>
                        <span *ngIf="form.get('companyName').invalid && 
                        (form.get('companyName').dirty || form.get('companyName').touched)">
                        <mat-error *ngIf="form.get('companyName').hasError('required')">
                            <small class="error"> *Company name is required.</small>
                        </mat-error>
                        </span>
                        <br>
                    </div>
                </ng-container>
            </div>
            <br>
            <button type="submit" class='btn-info'>Submit</button>&nbsp; &nbsp;
            <button type="button" (click)="onCancel()" class="btn-info">Cancel</button>
        </div>
    </form>
</div>